[tox]
envlist = py310 # Update to your target version
isolated_build = True

[testenv]
setenv =
    SKBUILD_CMAKE_ARGS = -DSTRICT_BUILD=ON
deps =
    numpy
changedir = {envtmpdir}
commands =
    # Strict check: ensure optional modules weren't silently skipped
    python -c "import scattnlay; assert scattnlay.mie_mp is not None, 'MP module missing!'"
    python -c "import scattnlay; assert scattnlay.mie_simd is not None, 'SIMD module missing!'"
    python -m unittest discover {toxinidir}/tests
